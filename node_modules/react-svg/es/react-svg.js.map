{"version":3,"file":"react-svg.js","sources":["../src/index.tsx"],"sourcesContent":["import SVGInjector from '@tanem/svg-injector'\nimport * as PropTypes from 'prop-types'\nimport * as React from 'react'\nimport ReactDOMServer from 'react-dom/server'\n\ninterface Props {\n  evalScripts?: 'always' | 'once' | 'never'\n  onInjected?: (svg: SVGSVGElement) => void\n  renumerateIRIElements?: boolean\n  src: string\n  svgClassName?: string\n  svgStyle?: React.CSSProperties\n}\n\nexport default class ReactSVG extends React.Component<\n  Props &\n    React.DetailedHTMLProps<\n      React.HTMLAttributes<HTMLDivElement>,\n      HTMLDivElement\n    >\n> {\n  static defaultProps = {\n    evalScripts: 'never',\n    onInjected: () => undefined,\n    renumerateIRIElements: true,\n    svgClassName: null,\n    svgStyle: {}\n  }\n\n  static propTypes = {\n    evalScripts: PropTypes.oneOf(['always', 'once', 'never']),\n    onInjected: PropTypes.func,\n    renumerateIRIElements: PropTypes.bool,\n    src: PropTypes.string.isRequired,\n    svgClassName: PropTypes.string,\n    svgStyle: PropTypes.object\n  }\n\n  container?: HTMLDivElement | null\n\n  refCallback: React.Ref<HTMLDivElement> = container => {\n    this.container = container\n  }\n\n  renderSVG() {\n    if (this.container instanceof Node) {\n      const {\n        evalScripts,\n        onInjected: each,\n        renumerateIRIElements,\n        src,\n        svgClassName,\n        svgStyle\n      } = this.props\n\n      const div = document.createElement('div')\n      div.innerHTML = ReactDOMServer.renderToStaticMarkup(\n        <div>\n          <div className={svgClassName} data-src={src} style={svgStyle} />\n        </div>\n      )\n\n      const wrapper = this.container.appendChild(\n        div.firstChild as HTMLDivElement\n      )\n\n      SVGInjector(wrapper.firstChild, {\n        each,\n        evalScripts,\n        renumerateIRIElements\n      })\n    }\n  }\n\n  removeSVG() {\n    if (\n      this.container instanceof Node &&\n      this.container.firstChild instanceof Node\n    ) {\n      this.container.removeChild(this.container.firstChild)\n    }\n  }\n\n  componentDidMount() {\n    this.renderSVG()\n  }\n\n  componentDidUpdate() {\n    this.removeSVG()\n    this.renderSVG()\n  }\n\n  componentWillUnmount() {\n    this.removeSVG()\n  }\n\n  render() {\n    const {\n      evalScripts,\n      onInjected,\n      renumerateIRIElements,\n      src,\n      svgClassName,\n      svgStyle,\n      ...rest\n    } = this.props\n\n    return <div {...rest} ref={this.refCallback} />\n  }\n}\n"],"names":["ReactSVG","container","refCallback","renderSVG","Node","props","evalScripts","each","onInjected","renumerateIRIElements","src","svgClassName","svgStyle","div","document","createElement","innerHTML","ReactDOMServer","renderToStaticMarkup","React.createElement","wrapper","appendChild","firstChild","SVGInjector","removeSVG","removeChild","componentDidMount","componentDidUpdate","componentWillUnmount","render","rest","React","defaultProps","undefined","propTypes","PropTypes","isRequired"],"mappings":";;;;;;;;IAcqBA;;;;;;;;;;;;;UAwBnBC;;UAEAC,cAAyC,UAAAD,SAAS,EAAI;YAC/CA,SAAL,GAAiBA,SAAjB;;;;;;;;SAGFE,iCAAY;QACN,KAAKF,SAAL,YAA0BG,IAA9B,EAAoC;wBAQ9B,KAAKC,KARyB;UAEhCC,YAFgC,eAEhCA,WAFgC;UAGpBC,IAHoB,eAGhCC,UAHgC;UAIhCC,sBAJgC,eAIhCA,qBAJgC;UAKhCC,IALgC,eAKhCA,GALgC;UAMhCC,aANgC,eAMhCA,YANgC;UAOhCC,SAPgC,eAOhCA,QAPgC;UAU5BC,GAAG,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAZ;MACAF,GAAG,CAACG,SAAJ,GAAgBC,cAAc,CAACC,oBAAf,CACdC,2BACEA;QAAK,SAAS,EAAER,aAAhB;oBAAwCD,IAAxC;QAA6C,KAAK,EAAEE;QADtD,CADc,CAAhB;UAMMQ,OAAO,GAAG,KAAKnB,SAAL,CAAeoB,WAAf,CACdR,GAAG,CAACS,UADU,CAAhB;MAIAC,WAAW,CAACH,OAAO,CAACE,UAAT,EAAqB;QAC9Bf,IAAI,EAAJA,IAD8B;QAE9BD,WAAW,EAAXA,YAF8B;QAG9BG,qBAAqB,EAArBA;OAHS,CAAX;;;;SAQJe,iCAAY;QAER,KAAKvB,SAAL,YAA0BG,IAA1B,IACA,KAAKH,SAAL,CAAeqB,UAAf,YAAqClB,IAFvC,EAGE;WACKH,SAAL,CAAewB,WAAf,CAA2B,KAAKxB,SAAL,CAAeqB,UAA1C;;;;SAIJI,iDAAoB;SACbvB,SAAL;;;SAGFwB,mDAAqB;SACdH,SAAL;SACKrB,SAAL;;;SAGFyB,uDAAuB;SAChBJ,SAAL;;;SAGFK,2BAAS;uBASH,KAAKxB,KATF;QAELC,WAFK,gBAELA,WAFK;QAGLE,UAHK,gBAGLA,UAHK;QAILC,qBAJK,gBAILA,qBAJK;QAKLC,GALK,gBAKLA,GALK;QAMLC,YANK,gBAMLA,YANK;QAOLC,QAPK,gBAOLA,QAPK;QAQFkB,IARE;;WAWAX,kCAASW,IAAT;MAAe,GAAG,EAAE,KAAK5B;OAAhC;;;;EA7FkC6B;;AAAjB/B,SAOZgC,eAAe;EACpB1B,WAAW,EAAE,OADO;EAEpBE,UAAU,EAAE;WAAMyB,SAAN;GAFQ;EAGpBxB,qBAAqB,EAAE,IAHH;EAIpBE,YAAY,EAAE,IAJM;EAKpBC,QAAQ,EAAE;;AAZOZ,SAeZkC,oDAAY;EACjB5B,WAAW,EAAE6B,KAAA,CAAgB,CAAC,QAAD,EAAW,MAAX,EAAmB,OAAnB,CAAhB,CADI;EAEjB3B,UAAU,EAAE2B,IAFK;EAGjB1B,qBAAqB,EAAE0B,IAHN;EAIjBzB,GAAG,EAAEyB,MAAA,CAAiBC,UAJL;EAKjBzB,YAAY,EAAEwB,MALG;EAMjBvB,QAAQ,EAAEuB;;;;;"}